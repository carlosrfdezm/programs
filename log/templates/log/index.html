{% load static %}
{% load extra_tags %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>Programas Académicos, UH</title>
    <meta content="" name="descriptison">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="{% static '/log/img/favicon.png' %}" rel="icon">
    <link href="{% static '/log/img/apple-touch-icon.png' %}" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Montserrat:300,400,500,700" rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="{% static '/log/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static '/log/vendor/font-awesome/css/font-awesome.min.css' %}" rel="stylesheet">
    <link href="{% static '/log/vendor/animate.css/animate.min.css' %}" rel="stylesheet">
    <link href="{% static '/log/vendor/ionicons/css/ionicons.min.css' %}" rel="stylesheet">
    <link href="{% static '/log/vendor/owl.carousel/assets/owl.carousel.min.css' %}" rel="stylesheet">
    <link href="{% static '/log/vendor/venobox/venobox.css' %}" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'programs/plugins/sweetalert2-theme-bootstrap-4/bootstrap-4.min.css' %}">


    <!-- Template Main CSS File -->
    <link href="{% static '/log/css/style.css' %}" rel="stylesheet">

    <!-- =======================================================
    * Template Name: NewBiz - v2.0.0
    * Template URL: https://bootstrapmade.com/newbiz-bootstrap-business-template/
    * Author: BootstrapMade.com
    * License: https://bootstrapmade.com/license/
    ======================================================== -->
</head>

<body>

<!-- ======= Header ======= -->
<header id="header" class="fixed-top">
    <div class="container">

        <div class="logo float-left">
            <!-- Uncomment below if you prefer to use an text logo -->
            <h1 class="text-light"><a href="#header"><span>Programas</span></a></h1>
            {#        <a href="#intro" class="scrollto">Programas</a>#}
        </div>

        <nav class="main-nav float-right d-none d-lg-block">
            <ul>
                <li class="active"><a href="#intro">Inicio</a></li>
                <li><a href="#about">Acerca de</a></li>
                <li><a href="#services">Programas</a></li>
                {#          <li><a href="#portfolio">Servicios</a></li>#}
                {% if  institution_has_cgc %}
                <li><a href="{% url 'cgc:cgc_index' %}" title="Comisión de Grados Científicos">Comisión de Grados</a></li>
                {% endif %}
                {% if  institution_has_postg %}
                <li><a href="{% url 'postg:postg_index' %}" title="Acceso de la dirección de Postgrado">Dirección de Posgrado</a></li>
                {% endif %}
                {% if  institution_has_formac %}
                <li><a href="{% url 'formac:formac_index' %}" title="Acceso de la dirección de Formación">Dirección de Formación</a></li>
                {% endif %}
                

            </ul>
        </nav><!-- .main-nav -->

    </div>
</header><!-- #header -->

<!-- ======= Intro Section ======= -->
<section id="intro" class="clearfix">
    <div class="container">

        <div class="intro-img">
            <img src="{% static '/log/img/intro-img.svg' %} " alt="" class="img-fluid">
        </div>

        <div class="intro-info">
            <h2>Sistema de <br><span>gestión</span><br>de Programas Académicos</h2>
            <div>
                <a href="#services" class="btn-get-started scrollto">Programas</a>
                {% if next_phd_announcements %}
                <a href="#next_announcements" class="btn-services scrollto">Próximas defensas</a>
                {% endif %}
            </div>
        </div>

    </div>
</section><!-- End Intro Section -->

<main id="main">

    <!-- ======= About Section ======= -->
    <section id="about">
        <div class="container">

            <header class="section-header">
                <h3>Acerca de</h3>
                <p> El sistema de gestión de programas académicos esta diseñado para facilitar el trabajo de los comités académicos de los programas de postgrado de
                    {{ institution_full_name }}.</p>
            </header>

            <div class="row about-container">

                <div class="col-lg-6 content order-lg-1 order-2">
                    <p class="text-justify">
                        Persigue elevar la calidad del proceso de gestión de los programas académicos, y a la vez garantizar la transparencia del mismo.
                        Por otro lado, también contribuye a la comunicación entre los diferentes actores que intervienen en este proceso.
                    </p>

                    <div class="icon-box wow fadeInUp">
                        <div class="icon"><i class="fa fa-shopping-bag"></i></div>
                        <h4 class="title"><a >Seguridad</a></h4>
                        <p class="description">Gestión segura durante todas las etapas del proceso de formación.</p>
                    </div>

                    <div class="icon-box wow fadeInUp" data-wow-delay="0.2s">
                        <div class="icon"><i class="fa fa-photo"></i></div>
                        <h4 class="title"><a >Transparencia</a></h4>
                        <p class="description">Acceso inmediato y transparente a la información del programa.</p>
                    </div>

                    <div class="icon-box wow fadeInUp" data-wow-delay="0.4s">
                        <div class="icon"><i class="fa fa-bar-chart"></i></div>
                        <h4 class="title"><a >Fiabilidad</a></h4>
                        <p class="description">Datos confiables a la distancia de un click</p>
                    </div>

                </div>

                <div class="col-lg-6 background order-lg-2 order-1 wow fadeInUp">
                    <img src="{% static '/log/img/about-extra-2.svg' %}" class="img-fluid" alt="">
                </div>
            </div>



        </div>
    </section><!-- End About Section -->

    <!-- ======= Services Section ======= -->
    <section id="services" class="section-bg">
        <div class="container">

            <header class="section-header">
                <h3>Programas</h3>
                <p>Programas académicos de {{ institution_full_name }}.</p>
            </header>

            <div class="row">
                {% for program in programs %}


                <div class="col-md-6 col-lg-5 {% cycle 'offset-lg-1 wow' 'wow' %} bounceInUp" data-wow-duration="1.4s" >
                    {% if program.type == 'phd' %}
                    <div class="box" style="height: 165px">
                        <div class="icon"><i class="{{ program.icon }}" style="color: #ff689b;"></i></div>
                        <h4 class="title"><a href="{% url 'programs:index' program.slug %}">{{ program.short_name}}</a></h4>
                        <p class="description">{{ program.description }}</p>
                    </div>
                    {% elif program.type == 'msc' %}

                    <div class="box" style="height: 165px">
                        <div class="icon"><i class="{{ program.icon }}" style="color: #14bc12;"></i></div>
                        <h4 class="title"><a href="{% url 'programs:index' program.slug %}">{{ program.short_name}}</a></h4>
                        <p class="description">{{ program.description }}</p>
                    </div>
                    {% elif program.type == 'dip' %}

                    <div class="box" style="height: 165px">
                        <div class="icon"><i class="{{ program.icon }}" style="color: #0b0fff;"></i></div>
                        <h4 class="title"><a href="{% url 'programs:index' program.slug %}">{{ program.short_name}}</a></h4>
                        <p class="description">{{ program.description }}</p>
                    </div>
                                        
                    {% elif program.type == 'coleg' %}

                    <div class="box" style="height: 165px">
                        <div class="icon"><i class="{{ program.icon }}" style="color: #0b0fff;"></i></div>
                        <h4 class="title"><a href="{% url 'programs:index' program.slug %}">{{ program.short_name}}</a></h4>
                        <p class="description">{{ program.description }}</p>
                    </div>

                    {% elif program.type == 'curs' %}

                    <div class="box" style="height: 165px">
                        <div class="icon"><i class="{{ program.icon }}" style="color: #0b0fff;"></i></div>
                        <h4 class="title"><a href="{% url 'programs:index' program.slug %}">{{ program.short_name}}</a></h4>
                        <p class="description">{{ program.description }}</p>
                    </div>



                    {% endif %}

                    
                    
                </div>

                {% endfor %}
                {% resetcycle %}

            </div>

        </div>
    </section><!-- End Services Section -->


    <!-- ======= Team Section ======= -->
    <section id="team">
        <div class="container">
            <div class="section-header">
                <h3>Comisión de Grados</h3>
                <p>Miembros de la Comisión de Grados Científicos <br> "{{ institution_full_name }}"<br>
                    <a class="btn btn-sm btn-primary" href="{% url 'cgc:cgc_index' %}" title="Ir a CGC">Ir a CGC</a> </p>

            </div>
            <div class="modal fade" id="modal_cgc_login">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Inicio de sesión de la CGC</h4>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>

                        <form class="form-horizontal" id="frm_cgc_login" action="{% url 'log:cgc_login' %}" method="post">
                            {% csrf_token %}
                            <div class="modal-body alert alert-success">
                                <div class="alert alert-warning text-center pb-3 alert-dismissible" role="alert">
                                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <p class="text-sm text-gray">Este acceso es sólo para miembros de la Comisión de Grados Científicos de
                                        {{ institution_short_name}}.</p>
                                </div>


                                <div class="form-row pb-2">
                                    <label class="col-md-3 control-label" for="inp_user">Email:</label>
                                    <div class="col-md-9">
                                        <input type="email" id="inp_user" class="form-control" placeholder="Correo electrónico" name="username" required>

                                    </div>
                                </div>



                                <div class="form-row">
                                    <label class="col-md-3 control-label" for="inp_password">Contraseña:</label>
                                    <div class="col-md-9">
                                        <input type="password" id="inp_password" class="form-control" placeholder="Contraseña" name="password" required>

                                    </div>
                                </div>






                            </div>
                            <div class="modal-footer justify-content-between">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                                <button type="submit" class="btn btn-success" id="btn_cgc_login">Iniciar</button>
                            </div>
                        </form>

                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>

            <div class="row">
                {% for member in cgc_members %}

                <div class="col-lg-3 col-md-6 wow fadeInUp" data-wow-delay="0.{{forloop.counter0}}s">
                    <div class="member">
                        {% if member.picture %}
                        <img src="{% url 'log:cgc_member_picture' member.id %}" class="img-fluid" style="width: 255px; height: 255px;" alt="">
                        {% elif member.gender == 'f' %}
                        <img src="{% static 'log/img/team-2.jpg' %}" class="img-fluid" alt="">
                        {% elif member.gender == 'm' %}
                        <img src="{% static 'log/img/team-1.jpg' %}" class="img-fluid" alt="">
                        {% endif %}
                        <div class="member-info">
                            <div class="member-info-content">
                                <h4>{{member.user.first_name}} {{ member.user.last_name|truncatewords:1 }}</h4>
                                <span>{{member.charge}}</span>
                                <div class="social">
                                    <a href="{{ member.tw_contact }}"><i class="fa fa-twitter"></i></a>
                                    <a href="{{ member.fb_contact }}"><i class="fa fa-facebook"></i></a>
                                    <a href="{{ member.gp_contact }}"><i class="fa fa-google-plus"></i></a>
                                    <a href="{{ member.in_contact }}"><i class="fa fa-linkedin"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}


            </div>

        </div>
    </section><!-- End Team Section -->

    {% if next_phd_announcements %}
    <!-- ======= Announcements Section ======= -->
    <section id="next_announcements" class="section-bg">
        <div class="container">

            <header class="section-header">
                <h3>Programas</h3>
                {% if next_phd_announcements %}
                <h4 class="text-center">Defensas de tesis doctorales</h4>
                {% endif %}
            </header>

            <div class="row">
                {% for announcement in next_phd_announcements %}


                <div class="col-sm-12 col-md-12 col-lg-12 wow bounceInUp pb-1 bordered text-center" data-wow-duration="1.4s" >
                    <div class="box">
                        <div class="icon"><i class="{{ announcement.phd_student.student.program.icon }}" style="color: #ff689b;"></i></div>
                        <h4 class="title text-center">Defensa de la tesis doctoral <a href="{{ announcement.phd_student.phdstudentthesis.file.url }}" target="_blank" title="Descargar la tesis">  "{{ announcement.phd_student.phdstudenttheme|capfirst }}"</a> de {{ announcement.phd_student.student }} </h4>
                        <span class="small pb-3">
                        <strong>Tutores:</strong>

                        {% for tuthor in announcement.phd_student.tuthor_set.all %}
                           {% if forloop.last %}
                            Dr.C. {{ tuthor }}
                           {% else %}
                            Dr.C. {{ tuthor }},
                           {% endif %}
                         {% endfor %}



                    </span>
                        , <span class="small pb-3"><strong>Fecha:</strong> {{ announcement.date|date:'d-m-Y' }},<strong>Hora:</strong>  {{ announcement.date|time:'H:i' }},
                        <strong>Modalidad: </strong> {{ announcement.type }}, <strong>Lugar: </strong> {{ announcement.place|capfirst }}</span>
                        {% if announcement.type == "On-line" %}
                    <br>
                    <span class="small pb-3"><strong>Url de la sala virtual: </strong><a href="{{ announcement.url_vc }}">{{ announcement.url_vc }}</a></span>

                    {% endif %}


                    </div>
                    <div class="row pb-3 align-items-stretch">
                        <div class="col-md-10 offset-1">


                            <p class="text-justify">
                                Lo invitamos a participar en esta defensa de tesis doctoral, cuyo tribunal, aprobado mediante el
                                acuerdo {{ announcement.approval_resolution }} de la Comision Nacional de Grados Cientificos, está integrado por los siguientes profesionales:

                            </p>
                            <div class="row text-left">
                                <div class="col-sm-6 col-md-6 col-lg-6">
                                    <p>Miembros:
                                    <ul>
                                        {% for member in announcement.phd_student.phdstudentthesis.phddefensecourtmember_set.all %}
                                        {% if member.role == "Miembro"%}
                                        <li>
                                            Dr.C. {{ member }} ({{ member.center }})
                                        </li>
                                        {% endif %}
                                        {% endfor %}
                                    </ul>
                                    </p>


                                </div>
                                <div class="col-sm-6 col-md-6 col-lg-6">
                                    <p>Suplentes:
                                    <ul>
                                        {% for member in announcement.phd_student.phdstudentthesis.phddefensecourtmember_set.all %}
                                        {% if member.role == "Suplente"%}
                                        <li>
                                            Dr.C. {{ member }} ({{ member.center|truncatechars:20 }})
                                        </li>
                                        {% endif %}
                                        {% endfor %}
                                    </ul>
                                    </p>


                                </div>

                            </div>

                            {% announcement_is_on_time announcement.id as announcement_on_time %}


                            <p class="text-left">
                                {% if announcement_on_time %}
                                Igualmente lo instamos a <a target="_blank" href="{{ announcement.phd_student.phdstudentthesis.file.url }}">leer</a> la tesis y hacernos conocer su <a href="" data-toggle="modal" data-target="#modal_new_comment_{{ announcement.phd_student.phdstudentthesis.id }}">opinión</a> al respecto en los enlaces que se proporcionan debajo de este texto.

                                {% endif %}
                            </p>





                        </div>

                    </div>
                    <div class="row pb-3 text-center align-items-stretch">
                        {% announcement_is_on_time announcement.id as announcement_on_time %}
                        <div class="col-md-6 offset-1">


                            <a class="text-primary" title="Descargar tesis" target="_blank" href="{{ announcement.phd_student.phdstudentthesis.file.url }}"> <i class="fa fa-download"></i> Descargar</a>

                        </div>
                        {% if announcement_on_time %}
                        <div class="col-md-4">

                            <a class="text-primary" href="" title=" Comentar tesis"  data-toggle="modal" data-target="#modal_new_comment_{{ announcement.phd_student.phdstudentthesis.id }}"><i class="fa fa-comment"></i> Comentar</a>

                        </div>
                        {% endif %}


                    </div>

                </div>

                <div class="modal fade" id="modal_new_comment_{{ announcement.phd_student.phdstudentthesis.id }}" >
                    <div class="modal-lg modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4 class="modal-title">Comentario</h4>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <form id="frm_new_comment_{{ announcement.phd_student.phdstudentthesis.id }}" enctype="multipart/form-data" data="{{ announcement.phd_student.phdstudentthesis.id }}" method="post">

                                <div class="modal-body">
                                    <p class="text-sm">Nuevo comentario de la tesis "{{ announcement.phd_student.phdstudenttheme|capfirst }}"</p>
                                    {% csrf_token %}
                                    <input type="hidden" name="thesis" value="{{ announcement.phd_student.phdstudentthesis.id }}">
                                    <div class="form-row">
                                        <div class="col-sm-12 col-md-12 col-lg-6">
                                            <input type="text" class="form-control" name="commenter_name" placeholder="Nombre y apellidos" required>
                                        </div>
                                        <div class="col-sm-12 col-md-12 col-lg-6">
                                            <input type="email" class="form-control" name="commenter_email" placeholder="Correo electrónico" required>
                                        </div>
                                    </div>
                                    <div class="form-row pt-2">
                                        <div class="col-12">
                                            <textarea name="text" class="textarea form-control" id="txt_comment_text_{{ announcement.phd_student.phdstudentthesis.id }}" placeholder="Escriba el comentario aquí, debe ser breve y respetuoso."></textarea>

                                        </div>
                                    </div>


                                </div>
                                <div class="modal-footer justify-content-between">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                                    <button type="submit" class="btn btn-success" id="">Guardar</button>
                                </div>
                            </form>

                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>

                {% endfor %}
                {% resetcycle %}

            </div>

        </div>
    </section>

    <!-- End Announcements Section -->
    {% endif %}
</main><!-- End #main -->

<!-- ======= Footer ======= -->
<footer id="footer">
    <div class="footer-top">
        <div class="container">
            <div class="row">

                <div class="col-lg-3 col-md-4 footer-info">
                    <h3>Programas</h3>
                    <p>Sistema para la gestión de programas académicos en {{ institution_full_name }}.</p>
                </div>

                <div class="offset-1 col-lg-4 col-md-4 footer-links">
                    <h4>Secciones</h4>
                    <ul>
                        <li><a href="#intro">Inicio</a></li>
                        <li><a href="#about">Acerca de</a></li>
                        <li><a href="#services">Programas</a></li>
                        <li><a href="{% url 'cgc:cgc_index' %}">Comisión de Grados</a></li>
                    </ul>
                </div>

                <div class="col-lg-4 col-md-4 footer-contact">
                    <h4>Contáctanos</h4>
                    <p>
                        {{ institution_address }}<br>
                        <i class="fa fa-phone"> {{ institution_phone }}</i><br>
                        <i class="fa fa-envelope"> {{ institution_email }}</i><br>
                    </p>

                    <div class="social-links">
                        <a href="#" class="twitter"><i class="fa fa-twitter"></i></a>
                        <a href="#" class="facebook"><i class="fa fa-facebook"></i></a>
                        <a href="#" class="instagram"><i class="fa fa-instagram"></i></a>
                        <a href="#" class="google-plus"><i class="fa fa-google-plus"></i></a>
                        <a href="#" class="linkedin"><i class="fa fa-linkedin"></i></a>
                    </div>

                </div>


            </div>
        </div>
    </div>

    <div class="container">
        <div class="copyright">
            &copy; Copyright <strong>LATED, UNAH</strong>. Todos los derechos reservados
        </div>
        <div class="credits">
            <!--
            All the links in the footer should remain intact.
            You can delete the links only if you purchased the pro version.
            Licensing information: https://bootstrapmade.com/license/
            Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/buy/?theme=NewBiz
          -->
            <a href="https://bootstrapmade.com/"></a>
        </div>

    </div>

</footer><!-- End Footer -->

<a href="#" class="back-to-top"><i class="fa fa-chevron-up"></i></a>

<!-- Vendor JS Files -->
<script src="{% static '/log/vendor/jquery/jquery.min.js' %}"></script>
<script src="{% static '/log/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static '/log/vendor/jquery.easing/jquery.easing.min.js' %}"></script>
<script src="{% static '/log/vendor/php-email-form/validate.js' %}"></script>
<script src="{% static '/log/vendor/counterup/counterup.min.js' %}"></script>
<script src="{% static '/log/vendor/mobile-nav/mobile-nav.js' %}"></script>
<script src="{% static '/log/vendor/wow/wow.min.js' %}"></script>
<script src="{% static '/log/vendor/isotope-layout/isotope.pkgd.min.js' %}"></script>
<script src="{% static '/log/vendor/owl.carousel/owl.carousel.min.js' %}"></script>
<script src="{% static '/log/vendor/waypoints/jquery.waypoints.min.js' %}"></script>
<script src="{% static '/log/vendor/venobox/venobox.min.js' %}"></script>
<script src="{% static 'programs/plugins/sweetalert2/sweetalert2.min.js' %}"></script>


<!-- Template Main JS File -->
<script src="{% static '/log/js/main.js' %}"></script>
<script>
    $(document).ready(function(){
     const Toast = Swal.mixin({
            toast: true,
            position: 'top-end',
            showConfirmButton: false,
            timer: 7000
        });
        {% for announcement in next_phd_announcements %}
     $(document).on('submit',"form[id*='frm_new_comment_{{ announcement.phd_student.phdstudentthesis.id }}']", function (e) {
                e.preventDefault();
                thesis_id = $(this).attr('data');
                var data = new FormData($(this).get(0));
                $('#frm_new_comment_'+thesis_id)[0].reset();

                var url = "{% url 'programs:ajx_new_phd_thesis_comment' announcement.phd_student.student.program.slug announcement.phd_student.phdstudentthesis.id %}";

                $.ajax({
                    url : url,
                    type : "POST", // http method
                    data : data, // data sent with the post request
                    cache: false,
                    processData: false,
                    contentType: false,


                    // handle a successful response
                    success : function(json) {

                        if (json[0].uploaded == 1) {
                            $('.modal').modal('hide');
                            Toast.fire({
                                type: 'success',
                                title: 'Comentario guardado exitosamente'
                            })

                        } else if(json[0].uploaded == 0){
                            Toast.fire({
                                type: 'error',
                                title: 'No se ha podido guardar el comentario. Errores:'+ json[0].errors
                            })

                        }

                        console.log(json); // log the returned json to the console
                        console.log("success"); // another sanity check


                    },

                    // handle a non-successful response
                    error : function(xhr,errmsg,err) {
                        Toast.fire({
                            type: 'error',
                            title: 'Uff, ha ocurrido algo desconocido.'
                        })
                    }
                });

            });
            {% endfor %}
    });
</script>

</body>

</html>